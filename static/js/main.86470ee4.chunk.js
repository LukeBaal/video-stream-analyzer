(this["webpackJsonpvideo-stream-analyzer"]=this["webpackJsonpvideo-stream-analyzer"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),i=n.n(a),c=n(8),o=n.n(c),s=(n(15),n(16),n(17),n(9),n(4)),l=n(6),d=n(2),u=function(e,t){switch(t.type){case"ADD_FILES":return Object(d.a)(Object(d.a)({},e),{},{files:[].concat(Object(s.a)(e.files),Object(s.a)(t.payload))});case"DELETE_FILE":return Object(d.a)(Object(d.a)({},e),{},{files:e.files.filter((function(e){return e.url!==t.payload}))});case"SET_DIFFS":return Object(d.a)(Object(d.a)({},e),{},{diffs:t.payload});default:return e}},f={files:[],diffs:[],worker:new Worker("ffprobe-worker.js")},j=Object(a.createContext)(f),b=function(e){var t=Object(a.useReducer)(u,f),n=Object(l.a)(t,2),i=n[0],c=n[1],o=i.worker;return Object(r.jsx)(j.Provider,{value:{files:i.files,diffs:i.diffs,addFiles:function(e){o.onmessage=function(e){c({type:"ADD_FILES",payload:e.data})};for(var t=[],n=0;n<e.length;n++)t.push(e.item(n));t=t.filter((function(e){return 0===i.files.filter((function(t){return t.url===e.name})).length})),o.postMessage(["get_file_info",t])},deleteFile:function(e){c({type:"DELETE_FILE",payload:e})}},children:e.children})},v=function(e){var t=e.onDrop,n=Object(a.useState)(!1),i=Object(l.a)(n,2),c=i[0],o=i[1],s=Object(a.useState)(""),d=Object(l.a)(s,2),u=d[0],f=(d[1],Object(a.createRef)()),j=0,b=function(e){e.preventDefault(),e.stopPropagation()},v=function(e){e.preventDefault(),e.stopPropagation(),j++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&o(!0)},h=function(e){e.preventDefault(),e.stopPropagation(),0===--j&&o(!1)},p=function(e){e.preventDefault(),e.stopPropagation(),o(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(t(e.dataTransfer.files),e.dataTransfer.clearData(),j=0)};return Object(a.useEffect)((function(){var e=f.current;return e.addEventListener("dragenter",v),e.addEventListener("dragleave",h),e.addEventListener("dragover",b),e.addEventListener("drop",p),function(){e.removeEventListener("dragenter",v),e.removeEventListener("dragleave",h),e.removeEventListener("dragover",b),e.removeEventListener("drop",p)}})),Object(r.jsx)("div",{ref:f,className:c?"filedrop drag":u?"filedrop ready":"filedrop",children:u&&!c?Object(r.jsx)("div",{children:u}):Object(r.jsx)("div",{children:"Drop a file here!"})})},h=function(){var e=Object(a.useContext)(j),t=e.files,n=e.addFiles,i=e.deleteFile;return Object(r.jsxs)("div",{children:[Object(r.jsx)(v,{onDrop:function(e){return n(e)}}),t.map((function(e){return Object(r.jsx)("span",{className:"badge badge-light badge-pill mr-1 file-badge",onClick:function(e){return function(e){i(e.target.innerHTML)}(e)},children:e.url},"badge".concat(e.url))}))]})},p=function(e){var t,n,a=null!==(t=e.data)&&void 0!==t?t:[],i=Object.keys(null!==(n=a[0])&&void 0!==n?n:[]).map((function(e){return Object(r.jsx)("th",{children:e},"th".concat(e))})),c=a.map((function(e,t){return Object(r.jsx)("tr",{children:Object.keys(null!==e&&void 0!==e?e:[]).map((function(t){return Object(r.jsx)("td",{children:e[t]},t)}))},t)}));return Object(r.jsx)("div",{className:"table-responsive",children:Object(r.jsxs)("table",{className:"table table-dark table-hover",children:[Object(r.jsx)("thead",{children:Object(r.jsx)("tr",{children:i&&i.length>0?i:null})}),Object(r.jsx)("tbody",{children:c&&c.length>0?c:null})]})})},g=function(e){var t=e.info;t.duration;return Object(r.jsx)("div",{className:"card mt-1",children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h4",{className:"card-title",children:t.url}),Object(r.jsxs)("h6",{className:"card-subtitle mb-2",children:[Object(r.jsxs)("span",{style:{marginRight:"1em"},children:["Duration: ",t.duration]}),Object(r.jsxs)("span",{children:["Bitrate: ",t.bit_rate]})]}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)(p,{data:t.streams})})]})})},O=function(){var e=Object(a.useContext)(j).files;return Object(r.jsx)("div",{className:"mt-2",children:e.map((function(e){return Object(r.jsx)(g,{info:e},e.url)}))})};var m=function(){return Object(r.jsx)("div",{className:"App",style:{width:"95%",margin:"auto"},children:Object(r.jsxs)(b,{children:[Object(r.jsx)(h,{}),Object(r.jsx)(O,{})]})})},x=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))};o.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(m,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/video-stream-analyzer",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/video-stream-analyzer","/service-worker.js");x?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):w(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):w(t,e)}))}}(),y()}},[[18,1,2]]]);
//# sourceMappingURL=main.86470ee4.chunk.js.map