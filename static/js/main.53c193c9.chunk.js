(this["webpackJsonpvideo-stream-analyzer"]=this["webpackJsonpvideo-stream-analyzer"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){},17:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(1),c=n.n(a),i=n(8),s=n.n(i),l=(n(15),n(16),n(17),n(9),n(4)),d=n(6),o=n(2),u=function(e,t){switch(t.type){case"ADD_FILES":return Object(o.a)(Object(o.a)({},e),{},{files:[].concat(Object(l.a)(e.files),Object(l.a)(t.payload))});case"DELETE_FILE":return Object(o.a)(Object(o.a)({},e),{},{files:e.files.filter((function(e){return e.url!==t.payload}))});case"SET_DIFFS":return Object(o.a)(Object(o.a)({},e),{},{diffs:t.payload});default:return e}},f={files:[],diffs:[],worker:new Worker("ffprobe-worker.js")},j=Object(a.createContext)(f),b=function(e){var t=Object(a.useReducer)(u,f),n=Object(d.a)(t,2),c=n[0],i=n[1],s=c.worker;return Object(r.jsx)(j.Provider,{value:{files:c.files,diffs:c.diffs,addFiles:function(e){s.onmessage=function(e){i({type:"ADD_FILES",payload:e.data})};for(var t=[],n=0;n<e.length;n++)t.push(e.item(n));t=t.filter((function(e){return 0===c.files.filter((function(t){return t.url===e.name})).length})),s.postMessage(["get_file_info",t])},deleteFile:function(e){i({type:"DELETE_FILE",payload:e})}},children:e.children})},O=function(e){var t=e.onDrop,n=Object(a.useState)(!1),c=Object(d.a)(n,2),i=c[0],s=c[1],l=Object(a.useState)(""),o=Object(d.a)(l,2),u=o[0],f=(o[1],Object(a.createRef)()),j=0,b=function(e){e.preventDefault(),e.stopPropagation()},O=function(e){e.preventDefault(),e.stopPropagation(),j++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&s(!0)},v=function(e){e.preventDefault(),e.stopPropagation(),0===--j&&s(!1)},h=function(e){e.preventDefault(),e.stopPropagation(),s(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(t(e.dataTransfer.files),e.dataTransfer.clearData(),j=0)};return Object(a.useEffect)((function(){var e=f.current;return e.addEventListener("dragenter",O),e.addEventListener("dragleave",v),e.addEventListener("dragover",b),e.addEventListener("drop",h),function(){e.removeEventListener("dragenter",O),e.removeEventListener("dragleave",v),e.removeEventListener("dragover",b),e.removeEventListener("drop",h)}})),Object(r.jsx)("div",{ref:f,className:i?"filedrop drag":u?"filedrop ready":"filedrop",children:u&&!i?Object(r.jsx)("div",{children:u}):Object(r.jsx)("div",{children:"Drop a file here!"})})},v=function(){var e=Object(a.useContext)(j),t=e.files,n=e.addFiles,c=e.deleteFile;return Object(r.jsxs)("div",{children:[Object(r.jsx)(O,{onDrop:function(e){return n(e)}}),t.map((function(e){return Object(r.jsx)("span",{className:"badge badge-light badge-pill mr-1 file-badge",onClick:function(e){return function(e){c(e.target.innerHTML)}(e)},children:e.url},"badge".concat(e.url))}))]})},h=function(e){var t,n,a=null!==(t=e.data)&&void 0!==t?t:[],c=Object.keys(null!==(n=a[0])&&void 0!==n?n:[]).map((function(e){return Object(r.jsx)("th",{children:e},"th".concat(e))})),i=a.map((function(e,t){return Object(r.jsx)("tr",{children:Object.keys(null!==e&&void 0!==e?e:[]).map((function(t){return Object(r.jsx)("td",{children:e[t]},t)}))},t)}));return Object(r.jsx)("div",{className:"table-responsive",children:Object(r.jsxs)("table",{className:"table table-dark table-hover",children:[Object(r.jsx)("thead",{children:Object(r.jsx)("tr",{children:c&&c.length>0?c:null})}),Object(r.jsx)("tbody",{children:i&&i.length>0?i:null})]})})},p=function(e){var t=e.info;t.duration;return Object(r.jsx)("div",{className:"card mt-1",children:Object(r.jsxs)("div",{className:"card-body",children:[Object(r.jsx)("h4",{className:"card-title",children:t.url}),Object(r.jsxs)("h6",{className:"card-subtitle mb-2",children:[Object(r.jsxs)("span",{style:{marginRight:"1em"},children:["Duration: ",t.duration]}),Object(r.jsxs)("span",{children:["Bitrate: ",t.bit_rate]})]}),Object(r.jsx)("div",{className:"row",children:Object(r.jsx)(h,{data:t.streams})})]})})},m=function(){var e=Object(a.useContext)(j).files;return Object(r.jsx)("div",{className:"mt-2",children:e.map((function(e){return Object(r.jsx)(p,{info:e},e.url)}))})};var g=function(){return Object(r.jsx)("div",{className:"App",style:{width:"95%",margin:"auto"},children:Object(r.jsxs)(b,{children:[Object(r.jsx)(v,{}),Object(r.jsx)(m,{})]})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,19)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};s.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(g,{})}),document.getElementById("root")),x()}},[[18,1,2]]]);
//# sourceMappingURL=main.53c193c9.chunk.js.map