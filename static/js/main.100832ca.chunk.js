(this["webpackJsonpvideo-stream-analyzer"]=this["webpackJsonpvideo-stream-analyzer"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),i=n.n(r),c=n(20),s=n.n(c),o=(n(28),n(29),n(30),n(7)),l=(n(21),n(11)),d=n(14),u=function(e,t){switch(t.type){case"ADD_FILES":return Object(o.a)(Object(o.a)({},e),{},{files:[].concat(Object(l.a)(e.files),Object(l.a)(t.payload))});case"DELETE_FILE":return Object(o.a)(Object(o.a)({},e),{},{files:e.files.filter((function(e){return e.url!==t.payload}))});case"SET_DIFFS":return Object(o.a)(Object(o.a)({},e),{},{diffs:t.payload});default:return e}},j={files:[],diffs:[],worker:new Worker("ffprobe-worker.js")},b=[{name:"Video",icon:"film"},{name:"Audio",icon:"music"},{name:"Data",icon:"database"},{name:"Subtitle",icon:"closed-captioning"},{name:"Attachement",icon:"paperclip"},{name:"NB",icon:"question"}],f=function(e){return null===e||void 0===e||-1===e||e>=b.length?"UNKNOWN":function(e){return Object(a.jsx)("i",{className:"fas fa-".concat(e.icon),title:e.name})}(b[e])},h=Object(r.createContext)(j),v=function(e){var t=Object(r.useReducer)(u,j),n=Object(d.a)(t,2),i=n[0],c=n[1],s=i.worker;return Object(a.jsx)(h.Provider,{value:{files:i.files,diffs:i.diffs,addFiles:function(e){s.onmessage=function(e){console.log(e.data);var t=e.data.map((function(e){var t;return Object(o.a)(Object(o.a)({},e),{},{streams:null===(t=e.streams)||void 0===t?void 0:t.map((function(e){var t=e.id,n=e.start_time,a=e.duration,r=e.codec_name,i=e.format,c=e.bit_rate,s=e.time_base,o=e.width,l=e.height,d=e.channels,u=e.sample_rate,j=e.frame_size;return{id:t,type:f(e.codec_type),duration:a,bit_rate:c,time_base:s,codec_name:r,start_time:n,format:i,width:o,height:l,channels:d,sample_rate:u,frame_size:j}}))})}));c({type:"ADD_FILES",payload:t})};for(var t=[],n=0;n<e.length;n++)t.push(e.item(n));t=t.filter((function(e){return 0===i.files.filter((function(t){return t.url===e.name})).length})),s.postMessage(["get_file_info",t])},deleteFile:function(e){c({type:"DELETE_FILE",payload:e})}},children:e.children})},m=function(e){var t,n,r=null!==(t=e.data)&&void 0!==t?t:[],i=Object.keys(null!==(n=r[0])&&void 0!==n?n:[]).map((function(e){return Object(a.jsx)("th",{children:e},"th".concat(e))})),c=r.map((function(e,t){return Object(a.jsx)("tr",{children:Object.keys(null!==e&&void 0!==e?e:[]).map((function(t){return Object(a.jsx)("td",{children:e[t]},t)}))},t)}));return Object(a.jsx)("div",{className:"table-responsive",children:Object(a.jsxs)("table",{className:"table table-dark table-hover",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:i&&i.length>0?i:null})}),Object(a.jsx)("tbody",{children:c&&c.length>0?c:null})]})})},p=function(e){var t=e.info,n=Object(r.useContext)(h).deleteFile;return Object(a.jsx)("div",{className:"card mt-1",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsxs)("div",{className:"card-title",style:{display:"flex",justifyContent:"space-between"},children:[Object(a.jsx)("h4",{children:t.url}),Object(a.jsx)("button",{className:"btn btn-danger btn-sm",onClick:function(){return n(t.url)},children:"X"})]}),Object(a.jsxs)("h6",{className:"card-subtitle mb-2",children:[Object(a.jsxs)("span",{style:{marginRight:"1em"},children:["Duration: ",t.duration]}),Object(a.jsxs)("span",{children:["Bitrate: ",t.bit_rate]})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)(m,{data:t.streams})})]})})},O=function(){var e=Object(r.useContext)(h).files;return Object(a.jsx)("div",{className:"mt-2",style:{width:"95%",margin:"auto"},children:e.map((function(e){return Object(a.jsx)(p,{info:e},e.url)}))})},g=function(e){var t=e.onDrop,n=(e.children,Object(r.useState)(!1)),i=Object(d.a)(n,2),c=i[0],s=i[1],o=Object(r.useContext)(h).files,l=Object(r.createRef)(),u=0,j=function(e){e.preventDefault(),e.stopPropagation()},b=function(e){e.preventDefault(),e.stopPropagation(),u++,e.dataTransfer.items&&e.dataTransfer.items.length>0&&s(!0)},f=function(e){e.preventDefault(),e.stopPropagation(),0===--u&&s(!1)},v=function(e){e.preventDefault(),e.stopPropagation(),s(!1),e.dataTransfer.files&&e.dataTransfer.files.length>0&&(t(e.dataTransfer.files),e.dataTransfer.clearData(),u=0)};Object(r.useEffect)((function(){var e=l.current;return e.addEventListener("dragenter",b),e.addEventListener("dragleave",f),e.addEventListener("dragover",j),e.addEventListener("drop",v),function(){e.removeEventListener("dragenter",b),e.removeEventListener("dragleave",f),e.removeEventListener("dragover",j),e.removeEventListener("drop",v)}}));var m="filedrop center-text-container";return c&&(m+=" drag"),0===o.length&&(m+=" border"),Object(a.jsx)("div",{className:m,style:{position:"relative",width:"100%",height:"100%",top:"0",left:"0"},ref:l,children:0===o.length?Object(a.jsx)("h1",{children:"Drop Files Here"}):null})},x=function(){var e=Object(r.useContext)(h).addFiles;return Object(a.jsx)("div",{children:Object(a.jsx)(g,{onDrop:function(t){return e(t)}})})},w=n(10),y=function(){return Object(a.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-dark bg-primary",children:[Object(a.jsx)(w.b,{className:"navbar-brand",to:"/",children:"Video Analyzer"}),Object(a.jsx)("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarColor01","aria-controls":"navbarColor01","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(a.jsx)("span",{className:"navbar-toggler-icon"})}),Object(a.jsx)("div",{className:"collapse navbar-collapse",id:"navbarColor01",children:Object(a.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(w.b,{className:"nav-link",to:"/",activeClassName:"active",exact:!0,children:"Compare Files"})}),Object(a.jsx)("li",{className:"nav-item",children:Object(a.jsx)(w.b,{className:"nav-link",to:"/streams",activeClassName:"active",children:"Compare Streams"})})]})})]})},N=n(2);var k=function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(w.a,{children:Object(a.jsxs)(v,{children:[Object(a.jsx)(y,{}),Object(a.jsxs)("div",{id:"main",children:[Object(a.jsx)(x,{}),Object(a.jsxs)(N.c,{children:[Object(a.jsx)(N.a,{path:"/streams",children:Object(a.jsx)("h1",{children:"streams"})}),Object(a.jsx)(N.a,{path:"/",children:Object(a.jsx)(O,{})})]})]})]})})})},E=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function _(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,37)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(k,{})}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");E?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):_(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):_(t,e)}))}}(),C()}},[[36,1,2]]]);
//# sourceMappingURL=main.100832ca.chunk.js.map